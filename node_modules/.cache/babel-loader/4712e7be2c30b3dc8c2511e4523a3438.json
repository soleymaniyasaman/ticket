{"ast":null,"code":"import cookie from 'react-cookies';\nimport qs from 'qs'; // import {BASE_URL, COOKIE_EXPIRES} from './constants';\n\nimport momentJalaali from \"moment-jalaali\";\nexport function Arraify(data) {\n  if (!data) return [];\n\n  if (Array.isArray(data)) {\n    return data;\n  } else {\n    return [data];\n  }\n}\n_c = Arraify;\n\nfunction filterNonNull(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(_ref => {\n    let [k, v] = _ref;\n    return v;\n  }));\n}\n\nexport function Header() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let token = Token(),\n      headers = new Headers();\n  headers.set('Accept', 'application/json');\n  headers.set('Content-Type', 'application/json');\n  let heads = options;\n  token && headers.set('Authorization', \"Bearer \" + token);\n  options.headers && Object.entries(options.headers).forEach(_ref2 => {\n    let [k, v] = _ref2;\n    return headers.set(k, v);\n  });\n  options.headers = headers;\n\n  if (heads[\"Content-Type\"]) {\n    options.headers.set(\"Accept\", heads[\"Accept\"]);\n  }\n\n  return options;\n}\n_c2 = Header;\nexport function Url() {\n  let url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  if (url.charAt(0) !== '/') {\n    url = '/' + url;\n  }\n\n  return BASE_URL + url + (data ? `?${qs.stringify(filterNonNull(data), {\n    arrayFormat: 'comma'\n  })}` : ``);\n}\n_c3 = Url;\nexport function UrlQuery() {\n  let url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return url + `?${qs.stringify(filterNonNull(data), {\n    arrayFormat: 'comma'\n  })}`;\n}\n_c4 = UrlQuery;\nexport function QueryUrl(url) {\n  return qs.parse(url, {\n    ignoreQueryPrefix: true\n  });\n}\n_c5 = QueryUrl;\nexport function Querys(url) {\n  var _query$token;\n\n  let query = qs.parse(url, {\n    ignoreQueryPrefix: true\n  });\n  query.token = query === null || query === void 0 ? void 0 : (_query$token = query.token) === null || _query$token === void 0 ? void 0 : _query$token.replaceAll(' ', '+');\n  return query;\n}\n_c6 = Querys;\nexport function setToken(token) {\n  const expires = new Date();\n  expires.setDate(expires.getDate() + COOKIE_EXPIRES);\n  cookie.save('token', token.access_token, {\n    path: '/',\n    expires\n  });\n  cookie.save('refresh', token.refresh_token, {\n    path: '/'\n  });\n}\nexport function RefreshToken() {\n  let token = cookie.load('refresh');\n\n  if (token === 'undefined') {\n    return undefined;\n  }\n\n  return token;\n}\n_c7 = RefreshToken;\nexport function Token() {\n  let token = cookie.load('token');\n\n  if (token === 'undefined') {\n    return undefined;\n  }\n\n  return token;\n}\n_c8 = Token;\nexport function removeToken() {\n  cookie.remove('token', {\n    path: '/'\n  });\n  cookie.remove('refresh', {\n    path: '/'\n  });\n}\nexport function getTokenObject() {\n  let token = Token();\n\n  if (token !== undefined) {\n    return {\n      Authorization: token\n    };\n  }\n}\nexport function formatNumber(value) {\n  let f = value.match(/\\d+/);\n  if (f) return f[0];\n  return '';\n}\nexport function timeToStr(time, format) {\n  if (time) {\n    return momentJalaali(time).locale('fa').format(format);\n  }\n\n  return \"\";\n}\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"Arraify\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Url\");\n$RefreshReg$(_c4, \"UrlQuery\");\n$RefreshReg$(_c5, \"QueryUrl\");\n$RefreshReg$(_c6, \"Querys\");\n$RefreshReg$(_c7, \"RefreshToken\");\n$RefreshReg$(_c8, \"Token\");","map":{"version":3,"names":["cookie","qs","momentJalaali","Arraify","data","Array","isArray","filterNonNull","obj","Object","fromEntries","entries","filter","k","v","Header","options","token","Token","headers","Headers","set","heads","forEach","Url","url","undefined","charAt","BASE_URL","stringify","arrayFormat","UrlQuery","QueryUrl","parse","ignoreQueryPrefix","Querys","query","replaceAll","setToken","expires","Date","setDate","getDate","COOKIE_EXPIRES","save","access_token","path","refresh_token","RefreshToken","load","removeToken","remove","getTokenObject","Authorization","formatNumber","value","f","match","timeToStr","time","format","locale"],"sources":["/Users/yasaman/Documents/first_example/src/components/utils/utils.js"],"sourcesContent":["import cookie from 'react-cookies';\nimport qs from 'qs';\n// import {BASE_URL, COOKIE_EXPIRES} from './constants';\nimport momentJalaali from \"moment-jalaali\";\n\n\nexport function Arraify(data) {\n    if (!data) return []\n\n    if (Array.isArray(data)) {\n        return data\n    } else {\n        return [data]\n    }\n}\n\nfunction filterNonNull(obj) {\n    return Object.fromEntries(Object.entries(obj).filter(([k, v]) => v));\n}\n\nexport function Header(options = {}) {\n    let token = Token(), headers = new Headers();\n    headers.set('Accept', 'application/json');\n    headers.set('Content-Type', 'application/json');\n    let heads = options;\n\n    token && headers.set('Authorization', \"Bearer \" + token);\n    options.headers && Object.entries(options.headers).forEach(([k, v]) => headers.set(k, v));\n    options.headers = headers;\n\n    if (heads[\"Content-Type\"]) {\n        options.headers.set(\"Accept\", heads[\"Accept\"])\n\n    }\n    return options;\n}\n\nexport function Url(url = \"\", data = undefined) {\n\n    if (url.charAt(0) !== '/') { url = '/' + url }\n    return BASE_URL + url + (data ? `?${qs.stringify(filterNonNull(data), { arrayFormat: 'comma' })}` : ``);\n}\n\nexport function UrlQuery(url = \"\", data = {}) {\n    return url + `?${qs.stringify(filterNonNull(data), { arrayFormat: 'comma' })}`\n}\n\n\nexport function QueryUrl(url) {\n    return qs.parse(url, { ignoreQueryPrefix: true })\n}\n\n\nexport function Querys(url) {\n    let query = qs.parse(url, { ignoreQueryPrefix: true })\n    query.token = query?.token?.replaceAll(' ', '+')\n    return query\n}\n\n\nexport function setToken(token) {\n    const expires = new Date();\n    expires.setDate(expires.getDate() + COOKIE_EXPIRES);\n    cookie.save('token', token.access_token, { path: '/', expires });\n    cookie.save('refresh', token.refresh_token, { path: '/' })\n}\n\nexport function RefreshToken() {\n    let token = cookie.load('refresh');\n    if (token === 'undefined') {\n        return undefined;\n    }\n    return token;\n}\n\nexport function Token() {\n    let token = cookie.load('token');\n    if (token === 'undefined') {\n        return undefined;\n    }\n\n    return token;\n}\n\nexport function removeToken() {\n    cookie.remove('token', { path: '/' });\n    cookie.remove('refresh', { path: '/' });\n}\n\nexport function getTokenObject() {\n    let token = Token();\n    if (token !== undefined) {\n        return { Authorization: token }\n    }\n}\n\nexport function formatNumber(value) {\n    let f = value.match(/\\d+/);\n    if (f) return f[0];\n    return '';\n}\n\nexport function timeToStr(time, format) {\n    if (time) {\n        return momentJalaali(time).locale('fa').format(format)\n    }\n    return \"\"\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}